<div class="profile-img">
  <img
    class="img-portada cursor-pointer"
    src="https://t4.ftcdn.net/jpg/05/17/53/57/360_F_517535712_q7f9QC9X6TQxWi6xYZZbMmw5cnLMr279.jpg"
    alt=""
    *ngIf="
      getPortadaBase64(user?.userData?.foto_portada) == 'data:image;base64,////'
    "
    (click)="showModalCover()"
  />
  <img
    class="img-portada cursor-pointer"
    [src]="getPortadaBase64(user?.userData?.foto_portada)"
    alt=""
    *ngIf="
      getPortadaBase64(user?.userData?.foto_portada) != 'data:image;base64,////'
    "
    (click)="showModalCover()"
  />
  <img
    class="img-perfil cursor-pointer"
    [src]="getPortadaBase64(user?.userData?.foto_perfil)"
    alt=""
    *ngIf="
      getPortadaBase64(user?.userData?.foto_portada) != 'data:image;base64,////'
    "
    (click)="showModalProfile()"
  />
  <img
    class="img-perfil cursor-pointer"
    src="https://t3.ftcdn.net/jpg/05/16/27/58/360_F_516275801_f3Fsp17x6HQK0xQgDQEELoTuERO4SsWV.jpg"
    alt=""
    *ngIf="
      getPortadaBase64(user?.userData?.foto_portada) == 'data:image;base64,////'
    "
    (click)="showModalProfile()"
  />
  <div class="profile-info text-white">
    <h1>&#64;{{ user?.nombre_usuario }}</h1>
    <div *ngIf="user?.id_rol?.id_rol === 1">
      <h2>Estudiante</h2>
    </div>
    <div *ngIf="user?.id_rol?.id_rol === 2">
      <h2>Creador</h2>
    </div>
  </div>
</div>

<p-dialog
  header="Edita tu foto de portada"
  [modal]="true"
  [(visible)]="visibleEditCover"
  [style]="{ maxWidth: '100%', width: '40rem' }"
  [contentStyle]="{ overflow: 'auto' }"
>
  <span class="p-text-secondary block mb-5"
    >Vamos a editar tu foto de portada</span
  >
  <div class="flex align-items-center gap-3 mb-5">
    <label for="portada_curso" class="font-semibold w-6rem"
      >Actualizar foto de portada</label
    >
    <div class="file-upload-container">
      <p-fileUpload
        mode="basic"
        chooseLabel="Elegir imagen"
        chooseIcon="pi pi-upload"
        name="portada_curso"
        url="http://localhost:3000/api/cursos/upload/image/"
        accept="image/*"
        maxFileSize="1000000"
        (onUpload)="onUploadCover($event)"
        [style]="{ width: '15rem' }"
        [auto]="true"
      ></p-fileUpload>

      <div *ngIf="archivoSubidoNombre" class="uploaded-file-name">
        {{ archivoSubidoNombre }}
      </div>
    </div>
  </div>
  <div class="flex justify-content-end gap-2">
    <button
      pButton
      label="Cancelar"
      severity="secondary"
      (click)="visibleEditCover = false"
    ></button>
    <button pButton (click)="updateProfileCover()" label="Guardar"></button>
  </div>
</p-dialog>

<p-dialog
  header="Edita tu foto de perfil"
  [modal]="true"
  [(visible)]="visibleEditProfile"
  [style]="{ maxWidth: '100%', width: '40rem' }"
  [contentStyle]="{ overflow: 'auto' }"
>
  <span class="p-text-secondary block mb-5"
    >Vamos a editar tu foto de perfil</span
  >
  <div class="flex align-items-center gap-3 mb-5">
    <label for="portada_curso" class="font-semibold w-6rem"
      >Actualizar foto de perfil</label
    >
    <div class="file-upload-container">
      <p-fileUpload
        mode="basic"
        chooseLabel="Elegir imagen"
        chooseIcon="pi pi-upload"
        name="portada_curso"
        url="http://localhost:3000/api/cursos/upload/image/"
        accept="image/*"
        maxFileSize="1000000"
        (onUpload)="onUploadProfile($event)"
        [style]="{ width: '15rem' }"
        [auto]="true"
      ></p-fileUpload>

      <div *ngIf="archivoSubidoNombre" class="uploaded-file-name">
        {{ archivoSubidoNombre }}
      </div>
    </div>
  </div>
  <div class="flex justify-content-end gap-2">
    <button
      pButton
      label="Cancelar"
      severity="secondary"
      (click)="visibleEditProfile = false"
    ></button>
    <button pButton (click)="updateProfilePhoto()" label="Guardar"></button>
  </div>
</p-dialog>
